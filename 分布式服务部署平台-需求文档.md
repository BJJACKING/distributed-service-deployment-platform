# 分布式服务部署平台 - 项目需求文档

## 项目概述
构建一个分布式服务部署平台，通过单一IP地址访问部署在两台服务器上的服务，实现负载均衡和高可用性。

## 项目目标
1. 通过一个IP地址访问两台服务器上的服务
2. 提供demo服务展示功能
3. 实现一键部署平台
4. 配置负载均衡器根据IP地址分发请求

## 技术架构
### 核心组件
1. **负载均衡层**：Nginx反向代理
2. **应用服务层**：Demo Web服务（Node.js/Python/Go）
3. **部署平台**：自动化部署脚本
4. **服务器环境**：两台云服务器（阿里云 + 腾讯云）

### 网络架构
```
客户端 → 负载均衡器IP → Nginx → 服务器1 (alijack)
                          ↓
                      服务器2 (tenjack)
```

## 详细需求

### 第一阶段：基础环境准备
#### 1.1 服务器环境检查
- [x] 检查两台服务器的系统信息
- [x] 确认网络连通性
- [x] 检查必要的端口开放情况

#### 1.2 软件环境安装
- [x] 在两台服务器上安装Docker
- [x] 安装Nginx（负载均衡器）
- [x] 安装Node.js运行环境
- [x] 安装Git版本控制

### 第二阶段：Demo服务开发
#### 2.1 Demo服务设计
- [x] 设计简单的Web服务
- [x] 实现服务器信息展示功能
- [x] 创建健康检查接口
- [x] 设计API接口

#### 2.2 Demo服务实现
- [x] 编写服务代码
- [x] 创建Dockerfile
- [x] 编写服务配置文件
- [x] 测试服务功能
- [x] 部署到两台服务器

### 第三阶段：负载均衡配置
#### 3.1 Nginx配置
- [x] 安装和配置Nginx
- [x] 配置负载均衡策略（轮询）
- [x] 配置健康检查
- [x] 配置日志记录

#### 3.2 网络配置
- [x] 配置IP访问（http://182.92.31.155）
- [ ] 配置SSL证书（可选）
- [x] 配置防火墙规则

### 第四阶段：部署平台开发
#### 4.1 部署脚本设计
- [x] 设计一键部署脚本
- [x] 实现服务启动/停止/重启功能
- [x] 实现版本管理
- [x] 实现回滚机制

#### 4.2 自动化部署
- [x] 编写部署脚本
- [x] 配置环境变量
- [x] 实现配置同步
- [x] 编写部署文档

### 第五阶段：测试与验证
#### 5.1 功能测试
- [ ] 测试负载均衡功能
- [ ] 测试服务高可用性
- [ ] 测试部署平台功能
- [ ] 测试故障转移

#### 5.2 性能测试
- [ ] 测试并发访问能力
- [ ] 测试响应时间
- [ ] 测试资源使用情况

## 实施计划
### 阶段一：环境准备（预计：1小时）
1. 服务器环境检查
2. 软件环境安装

### 阶段二：Demo服务（预计：2小时）
1. 服务设计和开发
2. Docker容器化

### 阶段三：负载均衡（预计：1小时）
1. Nginx配置
2. 网络配置

### 阶段四：部署平台（预计：2小时）
1. 部署脚本开发
2. 自动化配置

### 阶段五：测试验证（预计：1小时）
1. 功能测试
2. 性能测试

## 交付物
1. 完整的分布式服务部署平台
2. Demo服务源代码
3. 部署脚本和文档
4. React管理界面
5. 配置文件和说明
6. 测试报告

## 新增：React管理界面

### 界面功能
1. **仪表盘** - 系统概览和关键指标
2. **服务器管理** - 服务器状态和资源监控
3. **部署管理** - 一键部署和版本管理
4. **系统监控** - 实时性能图表
5. **日志查看** - 部署和系统日志
6. **系统设置** - 平台配置管理

### 技术栈
- React 18 + TypeScript
- Ant Design 5 (UI组件库)
- Recharts (图表库)
- Vite (构建工具)
- 模拟API服务器 (Node.js + Express)

### 运行方式
```bash
# 前端开发服务器
cd deployment-ui
npm install
npm run dev  # 端口: 3001

# API服务器
node api-server.js  # 端口: 3002
```

### 界面特点
- 🎨 现代化UI设计
- 📊 实时数据可视化
- 🚀 一键操作功能
- 📱 响应式布局
- 🔄 自动数据刷新

## 成功标准
1. 通过单一IP地址可以访问两台服务器的服务
2. 负载均衡功能正常工作
3. 一键部署平台可用
4. 系统具备高可用性
5. 文档完整清晰

---
*文档版本：v1.0*
*创建日期：2026-02-02*
*创建人：Walson*